[root@terraform terraform]# cat backend.tf

terraform {

backend "s3" {

bucket = "terraform-kusuma-learn"

key = "prod/terraform.tfstate"

encrypt = true

dynamodb_table = "dynamodb-terraform-state-lock"

region = "ap-south-1"

}

}




[root@terraform terraform]# cat terraform.tfvars
ami = "ami-018046b953a698135"

instance_type = "t2.micro"

key_name = "key"
[root@terraform terraform]# cat variable.tf
variable "ami" {

type = string

}

variable "instance_type" {

type = string

}

variable "key_name" {

type = string

}



[root@terraform terraform]# cat output.tf
output "instance_public_ip" {

value = aws_instance.myinstance.public_ip

}

output "instance_id" {

value = aws_instance.myinstance.id

}

output "instance_pubilc_dns" {

value = aws_instance.myinstance.public_dns

}
[root@terraform terraform]# cat main.tf
resource "aws_instance" "myinstance" {

ami = var.ami

instance_type = var.instance_type

key_name = var.key_name

tags = {

name = "myec2"

}
}

[root@terraform terraform]#

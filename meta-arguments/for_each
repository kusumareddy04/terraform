#Create multiple resources from a map or set (better than count when names matter

variable "instances" {

default = {

"dev-server" = "t2.micro"
"web-server" = "t2.small"

}
}

resource "aws_instance" "myinstance" {

for_each = var.instances

ami = "ami-018046b953a698135"

instance_type = each.value

tags = {

name = each.key

}
}

output "instance_id" {

value = {for k, v in aws_instance.myinstance : k => v.id}

}

output "instance_names" {

value = {for k, v in aws_instance.myinstance : k => v.tags.name}

}
